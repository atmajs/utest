
(function(){
	var flow = [],
		teardowns = 0;
	
	UTest({
		
		'first': function(){
			flow.push(1);
		},
		'async': function(done){
			
			setTimeout(function(){
				flow.push(2);
				done();
			},1000);
		},
		'third': function(){
			flow.push(3);
		},
		
		
		'$before': function(){
			flow.push(0);
		},
		'$after': assert.callback(function(){

			deepEq(flow, [0, 1, 2, 3]);
			eq(teardowns, 3);

		}),
		'$teardown': function(){
			teardowns++;
		}
	});
}())